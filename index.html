<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet"> 
        <title>Etch-a-sketch</title>
        <style>
            * {
                box-sizing: border-box; 
            }
            body {
                /*background-color: rgb(147, 247, 213);*/
                font-family: Pacifico, cursive;
                margin: 0;
                color: rgb(88, 2, 88);
                background-color: rgb(88, 2, 88);
            }
            div.main{
                position: relative;
                width: 100%;
                height: 100%;
            }

            div.header {
                position: absolute;
                top: 0;
                height: 20%;
                width: 100%;
                text-align: center;             
                background-image: linear-gradient(to bottom right, red, yellow, green, blue);  
            }

            h1 {                
                font-size: 60px;
                line-height: 100%;
            }

            .menu, #drawingBoard , .header{
                border: 5px black solid;
                border-radius: 10px;
            }
            .menu{
                position: absolute;
                left: 0;
                bottom: 0;
                width: 50%;
                height: 80%;
                background-image: linear-gradient(to bottom right, red, yellow, green, blue);
                display: flex;
                flex-direction: column;
            }      
            
            #drawingBoard{
                position: absolute;
                right: 0;
                bottom: 0;
                width: 50%;
                height: 80%;
                display: grid;
                padding: 10px;
                background-color: black;
            }  

            .tile {
                float: left;
                background-color: white;
                border: 1px solid rgb(238, 237, 237);
            }

            .button{
                font-size: 1.75em;
                margin-left: 5%;
                font-family: Pacifico, cursive;
                border: 10px solid black;
                border-radius: 50%;
                width: 35%;
                height: 50%;
            }    

            #clearDescription, #resizeDescription, #blackPenDescription, #rainbowPenDescription{
                position: absolute;
                top: 20%;
                right: 10%;
                width: 40%;
                padding: 15px;
                border: 3px solid black;
                border-radius: 10px;
                background-color: rgb(247, 207, 247);
                text-align: center;
                font-size: 2em;
            }        
        </style>
    </head>
    <body>        
        <main id="main" class="main">
            <div class="header">
                <h1>Etch-a-sketch</h1>
            </div>
            <div class="menu">                
                    <button type="button" id="clear" class="button">Clear Board</button>               
                    <button type="button" id="resize" class="button">Resize Board</button>                   
                    <button type="button" id="black" class="button">Black Pen</button>                   
                    <button type="button" id="rainbow" class="button">Magic Rainbow Pen</button>
            </div>
        </main>

        <script>
        //Initial setup
            let gridNumber = 16;  
            let color = "black";

            const field = document.getElementById("main");          
            const clearBTN = document.getElementById("clear");
            const resizeBTN = document.getElementById("resize");
            const blackBTN = document.getElementById("black");
            const rainbowBTN = document.getElementById("rainbow");

            drawBoard(gridNumber);
            drawTiles(gridNumber);

        //Buttons
            
            // Clear button functionality            
            clearBTN.addEventListener("click", (e) => {   
                const clearBoard = document.getElementById("drawingBoard").childNodes;
                clearBoard.forEach((tile) => {
                tile.style.backgroundColor = "white";
                });
            });
            //Clear button description
            clearBTN.addEventListener("mouseenter", (e) => {
                const clearDesc = document.createElement("div");    
                clearDesc.id = "clearDescription";                        
                clearDesc.textContent = "The Clear Board button erases all the colored tiles from the board. It does not change the pen color.";
                document.getElementsByClassName("menu")[0].appendChild(clearDesc);
            });
            clearBTN.addEventListener("mouseleave", (e) => {
                document.getElementsByClassName("menu")[0].removeChild(document.getElementById("clearDescription"));
            });


            //Resize Button functionality
            resizeBTN.addEventListener("click", (e) => {
                gridNumber = prompt("How many rows do you want to see? Please enter a number.");
                field.removeChild(document.getElementById("drawingBoard"));
                drawBoard(gridNumber);
                drawTiles(gridNumber);
            });
            //Resize button description
            resizeBTN.addEventListener("mouseenter", (e) => {
                const resizeDesc = document.createElement("div");    
                resizeDesc.id = "resizeDescription";                     
                resizeDesc.textContent = "The Resize Board button deletes and resizes the board to your liking. Just enter a number.";
                document.getElementsByClassName("menu")[0].appendChild(resizeDesc);
            });
            resizeBTN.addEventListener("mouseleave", (e) => {
                document.getElementsByClassName("menu")[0].removeChild(document.getElementById("resizeDescription"));
            });


            //Black Pen Functionality
            blackBTN.addEventListener("click", (e) => {
                const cells = document.getElementById("drawingBoard").childNodes; 
                cells.forEach((cell) => {                           //This overrides the default event listener declared in the drawTiles function
                    cell.addEventListener("mouseover", () => { 
                    color = "black";
                    cell.style.backgroundColor = `${color}`;
                    });
                });  
            });
            //Black pen description
            blackBTN.addEventListener("mouseenter", (e) => {
                const blackPenDesc = document.createElement("div");    
                blackPenDesc.id = "blackPenDescription";                    
                blackPenDesc.textContent = "The Balck Pen button changes the filling color to black.";
                document.getElementsByClassName("menu")[0].appendChild(blackPenDesc);
            });
            blackBTN.addEventListener("mouseleave", (e) => {
                document.getElementsByClassName("menu")[0].removeChild(document.getElementById("blackPenDescription"));
            });

            //Magic Rainbow Pen functionality
            rainbowBTN.addEventListener("click", (e) => {
                const cells = document.getElementById("drawingBoard").childNodes; 
                cells.forEach((cell) => {                           //This overrides the default event listener declared in the drawTiles function
                    cell.addEventListener("mouseover", () => { 
                    let color2 = randomColor();
                    cell.style.backgroundColor = `${color2}`;
                    });
                });  
            });
            //Rainbow pen description
            rainbowBTN.addEventListener("mouseenter", (e) => {
                const rainbowPenDesc = document.createElement("div");    
                rainbowPenDesc.id = "rainbowPenDescription";                    
                rainbowPenDesc.textContent = "The Magic Rainbow Pen button changes the filling color to random. Try it out, it's magical!";
                document.getElementsByClassName("menu")[0].appendChild(rainbowPenDesc);
            });
            rainbowBTN.addEventListener("mouseleave", (e) => {
                document.getElementsByClassName("menu")[0].removeChild(document.getElementById("rainbowPenDescription"));
            });

            //Functions

                //Create the drawing board function
                function drawBoard(gridNumber){ 
                    const drawingBoard = document.createElement("div"); 
                    drawingBoard.id = "drawingBoard";
                    drawingBoard.style.gridTemplate = `repeat(${gridNumber}, 1fr) / repeat(${gridNumber}, 1fr)`;
                    field.appendChild(drawingBoard);
                };

                //Create the tiles and append function
                function drawTiles(gridNumber){                    
                    for (let i = 0; i < gridNumber * gridNumber; i++){
                        const tile = document.createElement("div");
                        tile.classList.add("tile");                    
                        tile.addEventListener("mouseover", () => {  //Changing background-color on hovering
                        tile.style.backgroundColor = `${color}`;                        
                        });
                        document.getElementById("drawingBoard").appendChild(tile);
                    };                 
                };          
               
                //Create a random color function and call it for each tile
                function randomColor(){                      
                        let red = Math.floor(Math.random() * 255);
                        let green = Math.floor(Math.random() * 255);
                        let blue = Math.floor(Math.random() * 255);
                        return `rgb(${red}, ${green}, ${blue})`;
                }
        </script>
    </body>
</html>